
@model portal.ui.Models.LoginModel
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <!--begin::Base Path (base relative path for assets of this page) -->
    <base href="../">
    <!--end::Base Path -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
    <title>@ViewData["Title"]</title>
    @*<environment include="Development">*@
    <!--begin::Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700|Roboto:300,400,500,600,700">

    <!--end::Fonts -->
    <!--begin::Page Custom Styles(used by this page) -->
    <link href="~/Theme/assets/css/pages/login/login-3.css" rel="stylesheet" type="text/css" />


    <!--end::Page Custom Styles -->
    <!--begin::Global Theme Styles(used by all pages) -->
    <link href="~/Theme/assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
    <link href="~/Theme/assets/css/style.bundle.css" rel="stylesheet" type="text/css" />

    <!--end::Global Theme Styles -->
    <link rel="shortcut icon" href="~/Theme/assets/media/logos/favicon.ico" />
    @*</environment>*@
</head>
<body class="kt-quick-panel--right kt-demo-panel--right kt-offcanvas-panel--right kt-header--fixed kt-header-mobile--fixed kt-subheader--enabled kt-subheader--transparent kt-aside--enabled kt-aside--fixed kt-aside--minimize kt-page--loading">


    <!-- begin:: Page -->

    <div class="kt-grid kt-grid--ver kt-grid--root kt-page">
        <div class="kt-grid kt-grid--hor kt-grid--root  kt-login kt-login--v3 kt-login--signin" id="kt_login">
            <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor" style="background-image: url(Theme/assets/media/bg/bg-9.jpg);">
                <div class="kt-grid__item kt-grid__item--fluid kt-login__wrapper">
                    <div class="kt-login__container">
                        <div class="kt-login__logo">
                            <a href="#">
                                <img src="~/Images/logo.png">
                            </a>
                        </div>
                        <div class="kt-login__signin">
                            <div class="kt-login__head">
                                <h3 class="kt-login__title">Sign In</h3>
                                @if (ViewBag.ErrorMessage != null)
                                {
                                    <div class="text-danger">
                                        @ViewBag.ErrorMessage
                                    </div>
                                }
                            </div>
                            <form id="myForm" asp-action="LogIn" asp-controller="Application" asp-route-returnurl="@ViewData["ReturnUrl"]" class="kt-form" method="post">

                                <div class="input-group">
                                    <input asp-for="Email" class="form-control" placeholder="Email" />
                                    <span asp-validation-for="Email" class="text-danger w-100"></span>
                                </div>
                                <div class="input-group">
                                    <input asp-for="Password" class="form-control" placeholder="Password" />
                                    <span asp-validation-for="Password" class="text-danger w-100"></span>
                                </div>
                                <div class="row kt-login__extra">
                                    <div class="col">
                                        @*<label asp-for="RememberMe" class="kt-checkbox">
                                                <input type="checkbox" name="remember" asp-for="RememberMe" />
                                                @Html.DisplayNameFor(m => m.RememberMe)
                                            </label>*@
                                    </div>
                                    <div class="col kt-align-right">
                                        <a href="javascript:;" id="kt_login_forgot" class="kt-login__link">Forgot Password ?</a>
                                    </div>
                                </div>
                                <div class="kt-login__actions">
                                    <button id="login_SignIn" type="submit" class="btn btn-brand btn-elevate kt-login__btn-primary">Sign In</button>
                                </div>
                                <div class="kt-container  kt-container--fluid " style="text-align:center;margin-top: 15px;">
                                    <div class="kt-footer__menu">
                                        <a href="@ViewBag.ContactUsURL" target="_blank" class="kt-footer__menu-link kt-link">Contact Support</a>
                                    </div>
                                    <div class="kt-footer__copyright" style="margin-top:10px;">
                                        @DateTime.Now.Year&nbsp;&copy;&nbsp;<a href="@ViewBag.ContactUsURL" target="_blank" class="kt-link">Access Skills </a> @ViewBag.ProductDetail
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="kt-login__forgot">
                            <div class="kt-login__head">
                                <h3 class="kt-login__title">Forgotten Password ?</h3>
                                <div class="kt-login__desc">Enter your username to reset your password:</div>
                            </div>
                            <form class="kt-form" action="">
                                <div class="input-group">
                                    <input class="form-control" type="text" placeholder="User name" name="email" id="kt_email" autocomplete="off">
                                </div>
                                <div class="kt-login__actions">
                                    <button id="login_forgot_submit" class="btn btn-brand btn-elevate kt-login__btn-primary">Request</button>&nbsp;&nbsp;
                                    <button id="kt_login_forgot_cancel" class="btn btn-light btn-elevate kt-login__btn-secondary">Cancel</button>
                                </div>
                                <div class="kt-container  kt-container--fluid " style="text-align:center;margin-top:25px;">
                                    <div class="kt-footer__menu">
                                        <a href="@ViewBag.ContactUsURL" target="_blank" class="kt-footer__menu-link kt-link">Contact Support</a>
                                    </div>
                                    <div class="kt-footer__copyright" style="margin-top:15px;">
                                        @DateTime.Now.Year&nbsp;&copy;&nbsp;<a href="@ViewBag.ContactUsURL" target="_blank" class="kt-link">Access Skills </a> @ViewBag.ProductDetail
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div>

                        </div>
                    </div>
                </div>
                @*<partial name="/Views/Shared/partials/_footer/base.cshtml" />*@
            </div>
        </div>
    </div>
    @*<environment include="Development">*@
    <!-- end:: Page -->
    <!-- begin::Global Config(global config for global JS sciprts) -->
    <script>
            var KTAppOptions = {
                "colors": {
                    "state": {
                        "brand": "#22b9ff",
                        "light": "#ffffff",
                        "dark": "#282a3c",
                        "primary": "#5867dd",
                        "success": "#34bfa3",
                        "info": "#36a3f7",
                        "warning": "#ffb822",
                        "danger": "#fd3995"
                    },
                    "base": {
                        "label": ["#c5cbe3", "#a1a8c3", "#3d4465", "#3e4466"],
                        "shape": ["#f0f3ff", "#d9dffa", "#afb4d4", "#646c9a"]
                    }
                }
            };
    </script>
    <!-- end::Global Config -->
    <!--begin::Global Theme Bundle(used by all pages) -->
    <script src="~/Theme/assets/plugins/global/plugins.bundle.js" type="text/javascript"></script>
    <script src="~/Theme/assets/js/scripts.bundle.js" type="text/javascript"></script>

    <!--end::Global Theme Bundle -->
    <!--begin::Page Scripts(used by this page) -->
    @*<script src="~/Theme/assets/js/pages/custom/login/login-.js" type="text/javascript"></script>*@
    <script src="~/Theme/assets/js/pages/custom/login/login-general.js"></script>
    <!--end::Page Scripts -->
    <script>
            var showErrorMsg = function (form, type, msg) {
                var alert = $('<div class="alert alert-' + type + ' alert-dismissible" role="alert">\
                                                                    <div class="alert-text">'+ msg + '</div>\
                                                                    <div class="alert-close">\
                                                                        <i class="flaticon2-cross kt-icon-sm" data-dismiss="alert"></i>\
                                                                    </div>\
                                                                </div>');

                form.find('.alert').remove();
                alert.prependTo(form);
                //alert.animateClass('fadeIn animated');
                KTUtil.animateClass(alert[0], 'fadeIn animated');
                alert.find('span').html(msg);
            }
            $('#login_forgot_submit').click(function (e) {
                e.preventDefault();

                var btn = $(this);
                var form = $(this).closest('form');

                form.validate({
                    rules: {
                        email: {
                            required: true
                            //,email: true
                        }
                    }
                });

                if (!form.valid()) {
                    return;
                }

                btn.addClass('kt-spinner kt-spinner--right kt-spinner--sm kt-spinner--light').attr('disabled', true);

                $.ajax({
                    url: "/api/UserAdminApi/SendResetEmail",
                    type: "GET",
                    contentType: "application/json",
                    data: { email: $("#kt_email").val() },
                    dataType: "json",
                }).done(function (response) {
                    btn.removeClass('kt-spinner kt-spinner--right kt-spinner--sm kt-spinner--light').attr('disabled', false); // remove
                    form.clearForm(); // clear form
                    form.validate().resetForm(); // reset validation states

                    // display signup form
                    //displaySignInForm();
                    var login = $('#kt_login');
                    login.removeClass('kt-login--forgot');
                    login.removeClass('kt-login--signup');

                    login.addClass('kt-login--signin');
                    KTUtil.animateClass(login.find('.kt-login__signin')[0], 'flipInX animated');

                    var signInForm = login.find('.kt-login__signin form');
                    signInForm.clearForm();
                    signInForm.validate().resetForm();

                    showErrorMsg(signInForm, 'success', 'Password recovery instruction has been sent to your email.');
                }).fail(function (xhr) {

                });

                //form.ajaxSubmit({
                //    url: '/Account/SendResetEmail',
                //    success: function (response, status, xhr, $form) {
                //        // similate 2s delay
                //        setTimeout(function () {
                //            btn.removeClass('kt-spinner kt-spinner--right kt-spinner--sm kt-spinner--light').attr('disabled', false); // remove
                //            form.clearForm(); // clear form
                //            form.validate().resetForm(); // reset validation states

                //            // display signup form
                //            //displaySignInForm();
                //            var login = $('#kt_login');
                //            login.removeClass('kt-login--forgot');
                //            login.removeClass('kt-login--signup');

                //            login.addClass('kt-login--signin');
                //            KTUtil.animateClass(login.find('.kt-login__signin')[0], 'flipInX animated');

                //            var signInForm = login.find('.kt-login__signin form');
                //            signInForm.clearForm();
                //            signInForm.validate().resetForm();

                //            showErrorMsg(signInForm, 'success', 'Password recovery instruction has been sent to your email.');
                //        }, 2000);
                //    }
                //});
            });
    </script>
    @*</environment>*@
</body>
</html>

